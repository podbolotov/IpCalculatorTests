# IP Calculator Tests

Данный репозиторий содержит автоматизированные тесты мобильного приложения **IP Калькулятор** для Android.

Тесты реализованы на **Python 3.13.3** с использованием фреймворка **Appuim**.

> [!IMPORTANT]  
> **Документация находится в активной разработке**
>
> Так как настоящий набор тестов (и документация к нему) активно обновляется, данный README может содержать информацию,
> частично утратившую актуальность.

### Зависимости

Для исполнения данного тестового набора требуется наличие на исполняющем устройстве следующих внешних зависимостей:

- OpenJDK (21.0.2)
- NodeJS (v22.17.1)
- Appium (v2.19.0)
- Appium-драйвера UiAutomator2 (uiautomator2@4.2.8)
- allure2 (2.34.0)

С Python-зависимостями проекта можно ознакомиться в файле [requirements.txt](./requirements.txt).

### Переменные пути

Перед запуском тестов убедитесь, что в PATH-переменной системы доступны ссылки на размещение исполняемых файлов всех
описанных внешних зависимостей.

Также убедитесь в том, что на устройстве присутствует **Android SDK**, а в окружение экспортирована переменная
`ANDROID_HOME` ([см. подробнее](https://developer.android.com/tools/variables)).

### Запуск тестов

Для запуска тестов можно воспользоваться скриптом [run_tests.sh](./run_tests.sh).

> [!WARNING]  
> Работоспособность скрипта протестирована только на macOS Sequoia (15.6.1).

Для запуска тестового прогона с применением вспомогательного скрипта необходимо перейти в рабочую директорию проекта и
исполнить следующую команду:

 ```bash
 DEVICE_NAME='Android 16' bash run_tests.sh
 ```

В переменной `DEVICE_NAME` необходимо передать имя устройства или эмулятора, подключенного по **adb**.

С полным списком переменных, обрабатываемых тестовым фреймворком, можно ознакомиться в
файле [variables.py](./conf/variables.py).

> [!NOTE]  
> Можно запустить данный набор тестов так, как
> это [предлагается документацией к Pytest](https://docs.pytest.org/en/stable/how-to/usage.html) (но в таком случае
> генерацию allure-отчёта необходимо произвести вручную).

#### Фильтрация тестов по тегам

Тесты, опирающиеся на сторонние компоненты или приложения, сопровождены тегом `"Unstable"`.

Для того чтобы запустить только "стабильные" тесты (не взаимодействующие ни с чем, кроме самого тестируемого приложения)
добавьте к команде запуска следующий параметр:

```bash
--allure-label tag="Stable"
```

### Последний отчёт об исполнении

Актуальный отчёт об исполнении данного тестового набора доступен
по [следующей ссылке](https://raw.githubusercontent.com/Podbolotov/IpCalculatorTests/main/files/actual_report.html)
(используйте "сохранить как").